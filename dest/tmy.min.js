function errorCB(a){console.log("error")}function errorCB(a){console.log("error")}function errorCB(a){console.log("error")}function initControls(){$(".discover-help").unbind().on("click",function(){$("#discoverTooltip").slideToggle()}),$(".nowplaying-help").unbind().on("click",function(){$("#nowplayingTooltip").slideToggle()})}function errorCB(a){console.log("error")}var prefixUrl=window.location.pathname.slice(0,-1);prefixUrl=prefixUrl.substr(0,prefixUrl.lastIndexOf("/")),$(document).ready(function(){var a=$("#heroImage"),b=$("#movieTitle"),c=$("#movieOverview"),d=$("#movieGenres"),e=$("#movieScore"),f=$("#movieDirector"),g=$("#movieCast"),h=0;console.log(prefixUrl),$.ajax({type:"GET",url:"php/heroImage.php",dataType:"json",success:function(j){function k(a){var b=$.parseJSON(a).name;h==r.length?g.append(b):g.append(b+", ")}var l=prefixUrl+j[0].backdrop_path,m=j[0].movie_title,n=j[0].genre,o=j[0].overview,p=j[0].score,q=j[0].director,r=j[0].cast;for(a.css("background-image","url("+l+")"),$(".footer").css("background-image","url("+l+")"),b.html(m),d.html(n),c.html(o),g.html(r),f.html('<span class="intro-text">Directed By - </span>'+q),g.html('<span class="intro-text">Starring - </span>'),r=r.replace(/ /g,""),r=r.split(","),i=0;i<r.length;i++)theMovieDb.people.getById({id:r[i]},k,errorCB);for(i=0;i<p;i++)e.append('<i class="fa fa-star"></i> ')}})});var prefixUrl=window.location.pathname.slice(0,-1);prefixUrl=prefixUrl.substr(0,prefixUrl.lastIndexOf("/"));var offset=0,limit=12,total=0;$(document).ready(function(){function a(){$.ajax({type:"GET",data:{offset:offset,limit:limit},url:"php/allReviewed.php",dataType:"json",success:function(a){for(offset+=12,total=a[0].total,i=0;i<a.length;i++){var b,c=prefixUrl+a[i].poster_path,d=a[i].movie_title,e=a[i].genre,f=a[i].overview,g=a[i].score,h=a[i].director,j=a[i].publish_date,k=a[i].release_date,l=a[i].movie_id,m=e.replace(/,/g,"");m=m.toLowerCase();var n=d.replace(/\s+/g,"-").toLowerCase(),o=l,p=prefixUrl+"/movies/"+n+"?movie_id="+o;c='<div class="poster"><img src="'+c+'"/></div>',d='<h2 id="movie_title">'+d+"</h2>",e='<p id="genres">'+e+"</p>",f="<p>"+f+"</p>",h='<p><span class="intro-text">Directed By - </span>'+h+"</p>",b='<div class="score">',b+='<i class="fa fa-star"><span class="rating-number">'+g+"</span></i></div>",fullItems=$('<div data-movie-id="'+l+'" data-released="'+k+'" data-published="'+j+'" class="recent-item '+m+'" id="movie"><a href="'+p+'">'+c+'<div class="col-md-10 info">'+d+e+h+'</div><div class="col-md-2 score-container">'+b+"</div></a></div>"),$("#recentMovies").isotope("insert",fullItems).isotope("layout")}initControls(),offset>total&&$("#getMore").hide()}})}var b=$("#heroImage"),c=$("#movieTitle"),d=$("#movieOverview"),e=$("#movieGenres"),f=$("#movieScore"),g=$("#movieDirector"),h=$("#movieCast"),j=0;$.ajax({type:"GET",url:"php/heroImage.php",dataType:"json",success:function(a){function k(a){var b=$.parseJSON(a).name;j==r.length?h.append(b):h.append(b+", ")}var l=prefixUrl+a[0].backdrop_path,m=a[0].movie_title,n=a[0].genre,o=a[0].overview,p=a[0].score,q=a[0].director,r=a[0].cast;for(b.css("background-image","url("+l+")"),$(".footer").css("background-image","url("+l+")"),c.html(m),e.html(n),d.html(o),h.html(r),g.html('<span class="intro-text">Directed By - </span>'+q),h.html('<span class="intro-text">Starring - </span>'),r=r.replace(/ /g,""),r=r.split(","),i=0;i<r.length;i++)theMovieDb.people.getById({id:r[i]},k,errorCB);for(i=0;i<p;i++)f.append('<i class="fa fa-star"></i> ');initControls()}}),a();var k=$("#sortItems"),l=$("#sortAction");k.hide(),l.on("click",function(){k.slideDown("slow")}),k.on("click",function(){k.slideUp("slow")}),$("#getMore").on("click",function(){a()})});var prefixUrl=window.location.pathname.slice(0,-1),offset=0,limit=4;$(document).ready(function(){function a(a){theMovieDb.movies.getById({id:a},function(b){var c=$.parseJSON(b).imdb_id,d="http://www.imdb.com/title/",e=d+c,f=$('[data-movie-id="'+a+'"]');f.wrap('<a target="_blank" href="'+e+'"></a>')},errorCB)}var b=$("#heroImage"),c=$("#movieTitle"),d=$("#movieOverview"),e=$("#movieGenres"),f=$("#movieScore"),g=$("#movieDirector"),h=$("#movieCast"),j=$("#seeReview"),k=0;$.ajax({type:"GET",url:"php/heroImage.php",dataType:"json",success:function(a){function l(a){var b=$.parseJSON(a).name;k==t.length?h.append(b):h.append(b+", ")}var m=prefixUrl+a[0].backdrop_path,n=a[0].movie_id,o=a[0].movie_title,p=a[0].genre,q=a[0].overview,r=a[0].score,s=a[0].director,t=a[0].cast,u=o.replace(/\s+/g,"-").toLowerCase(),v=n,w=prefixUrl+"/movies/"+u+"?movie_id="+v;for(b.css("background-image","url("+m+")"),$(".footer").css("background-image","url("+m+")"),c.html('<span data-movie-id="'+n+'" class="featured-title">'+o+"</span>"),e.html(p),d.html(q),h.html(t),g.html('<span class="intro-text">Directed By - </span>'+s),h.html('<span class="intro-text">Starring - </span>'),t=t.replace(/ /g,""),t=t.split(","),i=0;i<t.length;i++)theMovieDb.people.getById({id:t[i]},l,errorCB);for(i=0;i<r;i++)f.append('<i class="fa fa-star"></i> ');j.append('<span class="see-review"><a href="'+w+'">See Review</a></span>')}}),$.ajax({type:"GET",url:"php/moviesReviewed.php",dataType:"json",data:{offset:0,limit:8},success:function(a){var b="";for($("#recentMovies").html(""),i=0;i<a.length;i++){var c,d=prefixUrl+a[i].poster_path,e=a[i].movie_title,f=a[i].genre,g=a[i].overview,h=a[i].score,j=a[i].director,k=a[i].publish_date,l=a[i].release_date,m=a[i].movie_id,n=e.replace(/\s+/g,"-").toLowerCase(),o=m,p=prefixUrl+"/movies/"+n+"?movie_id="+o,q=f.replace(/,/g,"");if(q=q.toLowerCase(),q.indexOf("science fiction")>-1){q=q.split(" ");var r=$.inArray("science",q),s=q[r]+"-"+q[r+1];q.splice(r+1,1),q.splice(r,1),q.push(s),q=q.toString(),q=q.replace(/,/g," ")}b+=q+" ",d='<div class="poster"><img src="'+d+'"/></div>',e='<h2 id="movie_title">'+e+"</h2>",f='<p id="genres">'+f+"</p>",g="<p>"+g+"</p>",j='<p><span class="intro-text">Directed By - </span>'+j+"</p>",c='<div class="score">',c+='<i class="fa fa-star"><span class="rating-number">'+h+"</span></i></div>",fullItems=$('<div data-released="'+l+'" data-movie-id="'+m+'" data-published="'+k+'" data-category="'+q+'" class="recent-item" id="movie"><a href="'+p+'">'+d+'<div class="col-md-10 info">'+e+f+j+'</div><div class="col-md-2 score-container">'+c+"</div></a></div>"),$("#recentMovies").isotope("insert",fullItems)}$("#recentMovies").imagesLoaded().progress(function(){$("#recentMovies").isotope("layout")}),b=b.split(" "),b=$.unique(b),b.pop(),initControls()}}),$.ajax({type:"GET",url:"php/discovery.php",dataType:"json",success:function(b){for($("#discover").html(""),i=0;i<b.length;i++){var c=prefixUrl+b[i].poster_path,d=b[i].movie_title,e=b[i].genre,f=b[i].overview,g=(b[i].score,b[i].director),h=(b[i].publish_date,b[i].release_date),j=b[i].moviedb_id,k=e.replace(/,/g,"");k=k.toLowerCase(),c='<div data-movie-id="'+j+'" class="poster"><img src="'+c+'"/></div>',d='<h2 id="movie_title">'+d+"</h2>",e='<p id="genres">'+e+"</p>",f="<p>"+f+"</p>",g='<p><span class="intro-text">Directed By - </span>'+g+"</p>",fullItems=$('<div data-released="'+h+'" class="recent-item '+k+'" id="discovery">'+c+"</div>"),$("#discover").isotope("insert",fullItems),a(j)}$("#discover").imagesLoaded().progress(function(){$("#discover").isotope("layout")}),initControls()}}),$.ajax({type:"GET",url:"php/nowplaying.php",dataType:"json",success:function(b){for($("#nowplaying").html(""),i=0;i<b.length;i++){var c=prefixUrl+b[i].poster_path,d=b[i].movie_title,e=b[i].genre,f=b[i].overview,g=(b[i].score,b[i].director),h=(b[i].publish_date,b[i].release_date),j=b[i].moviedb_id,k=e.replace(/,/g,"");k=k.toLowerCase(),c='<div data-movie-id="'+j+'" class="poster"><img src="'+c+'"/></div>',d='<h2 id="movie_title">'+d+"</h2>",e='<p id="genres">'+e+"</p>",f="<p>"+f+"</p>",g='<p><span class="intro-text">Directed By - </span>'+g+"</p>",fullItems=$('<div data-released="'+h+'" class="recent-item '+k+'" id="nowplaying">'+c+"</div>"),$("#nowplaying").isotope("insert",fullItems),a(j)}$("#nowplaying").imagesLoaded().progress(function(){$("#nowplaying").isotope("layout")}),initControls()}})});var prefixUrl=window.location.pathname.slice(0,-1);prefixUrl=prefixUrl.substr(0,prefixUrl.lastIndexOf("/")),prefixUrl=prefixUrl.substr(0,prefixUrl.lastIndexOf("/")),$(document).ready(function(){function a(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}function b(a){function b(a){var b=$.parseJSON(a).name;x==q.length?h.append(b):h.append(b+", ")}function j(){function a(a){theMovieDb.movies.getById({id:a},function(b){var c=$.parseJSON(b).imdb_id,d="http://www.imdb.com/title/",e=d+c,f=$('[data-movie-id="'+a+'"]');f.wrap('<a target="_blank" href="'+e+'"></a>')},errorCB)}theMovieDb.movies.getSimilarMovies({id:w},function(b){var c=$.parseJSON(b).results;if(c.length>0){var d=$("#similarMovies");for(d.append("<h5>Similar Movies</h5>"),i=0;i<3;i++){var e=c[i].poster_path,f=c[i].original_title,g=c[i].id;e=A+e,d.append('<div data-movie-id="'+g+'" class="col-md-4 similar"><img src="'+e+'"><p>'+f+"</p></div>"),a(g)}}},errorCB)}var l=prefixUrl+a[0].backdrop_path,m=a[0].movie_title,n=a[0].genre,o=a[0].overview,p=a[0].score,q=(a[0].director,a[0].cast),r=a[0].review,s=a[0].trailer,t=a[0].poster_path,u=(a[0].poster2_path,a[0].backdrop2_path),v=a[0].backdrop3_path,w=a[0].moviedb_id,x=0;for(c.css("background-image","url("+l+")"),$(".footer").css("background-image","url("+l+")"),d.html('<span class="">'+m+"</span>"),f.html(n),e.html(o),k.prepend('<img class="poster" src="..'+t+'">'),i=0;i<p;i++)g.append('<i class="fa fa-star"></i> ');for(q=q.replace(/ /g,""),q=q.split(","),h.html('<span class="intro-text">Starring - </span>'),i=0;i<q.length;i++)theMovieDb.people.getById({id:q[i]},b,errorCB);r=r.replace(/(?:\r\n|\r|\n)/g,"<br/>"),Array.prototype.clean=function(a){for(var b=0;b<this.length;b++)this[b]==a&&(this.splice(b,1),b--);return this},r=r.split("<br/>"),s=""!==s?'<div id="movieTrailer" class="trailer-container"><iframe src="'+s+'modestbranding=1;controls=0;showinfo=0;rel=0;fs=1" frameborder="0" allowfullscreen></iframe></div>':"",u="/assets/images/backdrops/"!=u?'<img src="..'+u+'">':"",v="/assets/images/backdrops/"!=v?'<img src="..'+v+'">':"";var y=$("#pageContent");for(y.append('<div class="col-md-6 interior-image">'+u+"</div>"),y.append('<div class="col-md-6 interior-image">'+v+"</div>"),i=0;i<r.length;i++)r[i].length<50?y.append('<div class="col-md-12" style="font-size:24px;">'+r[i]+"<br></div>"):y.append('<div class="col-md-12">'+r[i]+"<br></div>");y.append('<div class="col-md-12"><br>'+s+"</div>"),$("#movieTrailer").fitVids();var z,A;theMovieDb.configurations.getConfiguration(function(a){z=$.parseJSON(a).images.base_url,A=z+"w500",j()},errorCB)}var c=$("#heroImage"),d=$("#movieTitle"),e=$("#movieOverview"),f=$("#movieGenres"),g=$("#movieScore"),h=($("#movieDirector"),$("#movieCast")),j=$("#movieTrailer"),k=$("#moviePoster");j.fitVids();var l=function(a){var b,c,d=decodeURIComponent(window.location.search.substring(1)),e=d.split("&");for(c=0;c<e.length;c++)if(b=e[c].split("="),b[0]===a)return void 0===b[1]?!0:b[1]},m=l("movie_id"),n=/[^\/]*$/.exec(window.location)[0];n=n.replace(/-/g," "),n=a(n),m?$.ajax({type:"GET",url:"../php/pageDetails.php",data:{movie_id:m},dataType:"json",success:function(a){b(a)}}):(""===m||n)&&$.ajax({type:"GET",url:"../php/pageDetailsMovieName.php",data:{movieName:n},dataType:"json",success:function(a){b(a)}})}),$(document).ready(function(){var a=$("#sortItems"),b=$("#sortAction"),c=$("#recentMovies"),d=$("#discover"),e=$("#nowplaying");c.isotope({itemSelector:"#movie",getSortData:{published:"[data-published]",released:"[data-released]",category:"[data-category]"},percentPosition:!0,masonry:{columnWidth:".recent-item"}}),d.isotope({itemSelector:"#discovery",percentPosition:!0,masonry:{columnWidth:".recent-item"}}),e.isotope({itemSelector:"#nowplaying",percentPosition:!0,masonry:{columnWidth:".recent-item"}}),a.hide(),b.on("click",function(){a.slideToggle()}),a.on("click",function(){a.slideToggle()});var f,g=$("#filterItems");$("#filterAction");g.hide(),g.on("click",function(a){var b=$("#noFilterItems");b.hide(),"#ScienceFiction"==a.target.id&&(a.target.id="#Science"),f=a.target.id.substring(1),f=f.toLowerCase(),f="all"==f?"*":"."+f,g.slideToggle(),c.isotope({filter:f})}),$("#sortReviewed").on("click",function(){c.isotope({sortBy:"published",sortAscending:!1})}),$("#sortReleased").on("click",function(){c.isotope({sortBy:"released",sortAscending:!1})})});