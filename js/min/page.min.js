function errorCB(a){console.log("error")}var prefixUrl=window.location.pathname.slice(0,-1);prefixUrl=prefixUrl.substr(0,prefixUrl.lastIndexOf("/")),prefixUrl=prefixUrl.substr(0,prefixUrl.lastIndexOf("/")),$(document).ready(function(){function a(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}function b(a){function b(a){var b=$.parseJSON(a).name;A==q.length?h.append(b):h.append(b+", ")}function j(){function a(a){theMovieDb.movies.getById({id:a},function(b){var c=$.parseJSON(b).imdb_id,d="http://www.imdb.com/title/",e=d+c,f=$('[data-movie-id="'+a+'"]');f.wrap('<a target="_blank" href="'+e+'"></a>')},errorCB)}theMovieDb.movies.getSimilarMovies({id:w},function(b){var c=$.parseJSON(b).results;if(c.length>0){var d=$("#similarMovies");for(d.append("<h5>Similar Movies</h5>"),i=0;i<3;i++){var e=c[i].poster_path,f=c[i].original_title,g=c[i].id;e=D+e,d.append('<div data-movie-id="'+g+'" class="col-md-4 similar"><img src="'+e+'"><p>'+f+"</p></div>"),a(g)}}},errorCB)}var l=prefixUrl+a[0].backdrop_path,m=a[0].movie_title,n=a[0].genre,o=a[0].overview,p=a[0].score,q=(a[0].director,a[0].cast),r=a[0].review,s=a[0].trailer,t=a[0].poster_path,u=(a[0].poster2_path,a[0].backdrop2_path),v=a[0].backdrop3_path,w=a[0].moviedb_id,x=a[0].release_date,y=a[0].publish_date,z=a[0].popular_vote,A=0;for(c.css("background-image","url("+l+")"),$(".footer").css("background-image","url("+l+")"),d.html('<span class="">'+m+"</span>"),f.html(n),e.html(o),k.prepend('<img class="poster" src="..'+t+'">'),$(".release-date").append('<span class="prop">'+x+"</span>"),$(".review-date").append('<span class="prop">'+y+"</span>"),$(".popular-vote").append('<span class="prop">'+z+"</span>"),i=0;i<p;i++)g.append('<i class="fa fa-star"></i> ');for(q=q.replace(/ /g,""),q=q.split(","),h.html('<span class="intro-text">Starring - </span>'),i=0;i<q.length;i++)theMovieDb.people.getById({id:q[i]},b,errorCB);r=r.replace(/(?:\r\n|\r|\n)/g,"<br/>"),Array.prototype.clean=function(a){for(var b=0;b<this.length;b++)this[b]==a&&(this.splice(b,1),b--);return this},r=r.split("<br/>"),s=""!==s?'<div id="movieTrailer" class="trailer-container"><iframe src="'+s+'modestbranding=1;controls=0;showinfo=0;rel=0;fs=1" frameborder="0" allowfullscreen></iframe></div>':"",u="/assets/images/backdrops/"!=u?'<img src="..'+u+'">':"",v="/assets/images/backdrops/"!=v?'<img src="..'+v+'">':"";var B=$("#pageContent");for(B.append('<div class="col-md-6 interior-image">'+u+"</div>"),B.append('<div class="col-md-6 interior-image">'+v+"</div>"),i=0;i<r.length;i++)r[i].length<50?B.append('<div class="col-md-12" style="font-size:24px;">'+r[i]+"<br></div>"):B.append('<div class="col-md-12">'+r[i]+"<br></div>");B.append('<div class="col-md-12"><br>'+s+"</div>"),$("#movieTrailer").fitVids();var C,D;theMovieDb.configurations.getConfiguration(function(a){C=$.parseJSON(a).images.base_url,D=C+"w500",j()},errorCB)}var c=$("#heroImage"),d=$("#movieTitle"),e=$("#movieOverview"),f=$("#movieGenres"),g=$("#movieScore"),h=($("#movieDirector"),$("#movieCast")),j=$("#movieTrailer"),k=$("#moviePoster");j.fitVids();var l=function(a){var b,c,d=decodeURIComponent(window.location.search.substring(1)),e=d.split("&");for(c=0;c<e.length;c++)if(b=e[c].split("="),b[0]===a)return void 0===b[1]||b[1]},m=l("movie_id"),n=/[^\/]*$/.exec(window.location)[0];n=n.replace(/-/g," "),n=a(n),document.title="This Movie Year - "+n,m?$.ajax({type:"GET",url:"../php/pageDetails.php",data:{movie_id:m},dataType:"json",success:function(a){b(a)}}):(""===m||n)&&$.ajax({type:"GET",url:"../php/pageDetailsMovieName.php",data:{movieName:n},dataType:"json",success:function(a){console.log(a),0===a.length?window.location=prefixUrl+"/404.php":b(a)}})});